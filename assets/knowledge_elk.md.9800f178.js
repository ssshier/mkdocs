import{_ as a,c as e,o as s,a as n}from"./app.94f92628.js";const f=JSON.parse('{"title":"ELK","description":"","frontmatter":{},"headers":[{"level":2,"title":"Elasticsearch","slug":"elasticsearch"},{"level":3,"title":"API","slug":"api"},{"level":3,"title":"\u8C03\u4F18","slug":"\u8C03\u4F18"},{"level":3,"title":"\u9762\u8BD5","slug":"\u9762\u8BD5"}],"relativePath":"knowledge/elk.md","lastUpdated":1665546130000}'),r={name:"knowledge/elk.md"},l=n(`<h1 id="elk" tabindex="-1">ELK <a class="header-anchor" href="#elk" aria-hidden="true">#</a></h1><nav class="table-of-contents"><ul><li><a href="#elasticsearch">Elasticsearch</a><ul><li><a href="#api">API</a></li><li><a href="#\u8C03\u4F18">\u8C03\u4F18</a></li><li><a href="#\u9762\u8BD5">\u9762\u8BD5</a></li></ul></li></ul></nav><h2 id="elasticsearch" tabindex="-1">Elasticsearch <a class="header-anchor" href="#elasticsearch" aria-hidden="true">#</a></h2><h3 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">GET /my-index-000001/_search</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">GET /my-index-000001/_search?from=40&amp;size=20</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;query&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;term&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;user.id&quot;: &quot;kimchy&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u8C03\u4F18" tabindex="-1">\u8C03\u4F18 <a class="header-anchor" href="#\u8C03\u4F18" aria-hidden="true">#</a></h3><h4 id="\u786C\u4EF6\u9009\u62E9" tabindex="-1">\u786C\u4EF6\u9009\u62E9 <a class="header-anchor" href="#\u786C\u4EF6\u9009\u62E9" aria-hidden="true">#</a></h4><p>\u9009\u62E9\u6027\u80FD\u66F4\u597D\u7684\u78C1\u76D8</p><h4 id="\u5206\u7247\u7B56\u7565" tabindex="-1">\u5206\u7247\u7B56\u7565 <a class="header-anchor" href="#\u5206\u7247\u7B56\u7565" aria-hidden="true">#</a></h4><p>\u8BBE\u7F6E\u5408\u7406\u7684\u5206\u7247\u6570: \u5206\u7247\u4F1A\u5360\u7528\u66F4\u591A\u7684\u8D44\u6E90</p><p>\u4E00\u822C\u4E0D\u8D85\u8FC7\u8282\u70B9\u6570\u76843\u500D, \u8282\u70B9\u6570 &lt;= \u4E3B\u5206\u7247\u6570* (\u526F\u672C\u6570+1)</p><p>\u63A8\u8FDF\u5206\u7247\u5206\u914D</p><h4 id="\u8DEF\u7531\u9009\u62E9" tabindex="-1">\u8DEF\u7531\u9009\u62E9 <a class="header-anchor" href="#\u8DEF\u7531\u9009\u62E9" aria-hidden="true">#</a></h4><p><code>shard = hash(routing) % number_of_primary_shards</code></p><p>routing\u9ED8\u8BA4\u4E3A\u6587\u6863id</p><p>\u4E0D\u5E26routing\u67E5\u8BE2\u4F1A\u67E5\u8BE2\u6240\u6709</p><h4 id="\u5199\u5165\u901F\u5EA6\u4F18\u5316" tabindex="-1">\u5199\u5165\u901F\u5EA6\u4F18\u5316 <a class="header-anchor" href="#\u5199\u5165\u901F\u5EA6\u4F18\u5316" aria-hidden="true">#</a></h4><p>\u52A0\u5927 Translog Flush, \u51CF\u5C11 Iops, Writeblock</p><p>\u589E\u5927 Index Refresh \u95F4\u9694, \u51CF\u5C11 Segment merger \u6B21\u6570</p><p>\u8C03\u6574 Bulk \u7EBF\u7A0B\u6C60\u548C\u961F\u5217</p><p>\u4F18\u5316\u8282\u70B9\u95F4\u7684\u4EFB\u52A1\u5206\u5E03</p><p>\u4F18\u5316 Lucene \u5C42\u7684\u7D22\u5F15\u5EFA\u7ACB, \u964D\u4F4E CPU \u53CA IO</p><h4 id="\u5185\u5B58\u8BBE\u7F6E" tabindex="-1">\u5185\u5B58\u8BBE\u7F6E <a class="header-anchor" href="#\u5185\u5B58\u8BBE\u7F6E" aria-hidden="true">#</a></h4><p>\u6700\u597D\u4E0D\u8D85\u8FC7\u5185\u5B58\u5927\u5C0F\u768450%</p><h3 id="\u9762\u8BD5" tabindex="-1">\u9762\u8BD5 <a class="header-anchor" href="#\u9762\u8BD5" aria-hidden="true">#</a></h3><h4 id="\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528elasticsearch" tabindex="-1">\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528Elasticsearch <a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528elasticsearch" aria-hidden="true">#</a></h4><p>\u5927\u6570\u636E\u67E5\u8BE2</p><p>\u5168\u6587\u7D22\u5F15</p><h4 id="master\u9009\u62E9" tabindex="-1">master\u9009\u62E9 <a class="header-anchor" href="#master\u9009\u62E9" aria-hidden="true">#</a></h4><p>ZenDiscovery Ping Unicast</p><p>\u914D\u7F6Enode\u53EF\u4EE5\u6210\u4E3Amaster\u8282\u70B9</p><h4 id="\u96C6\u7FA4\u8111\u88C2" tabindex="-1">\u96C6\u7FA4\u8111\u88C2 <a class="header-anchor" href="#\u96C6\u7FA4\u8111\u88C2" aria-hidden="true">#</a></h4><p>\u591A\u4E2Amaster</p><p>\u5BFC\u81F4\u539F\u56E0: \u7F51\u7EDC\u95EE\u9898 \u8282\u70B9\u8D1F\u8F7D \u5185\u5B58\u56DE\u6536 \u89E3\u51B3\u65B9\u6CD5: \u51CF\u5C11\u8BEF\u5224 \u9009\u4E3E\u89E6\u53D1 \u89D2\u8272\u5206\u79BB (master data false)</p><h4 id="\u5012\u6392\u7D22\u5F15" tabindex="-1">\u5012\u6392\u7D22\u5F15 <a class="header-anchor" href="#\u5012\u6392\u7D22\u5F15" aria-hidden="true">#</a></h4><p>\u5C06\u5173\u952E\u5B57\u548C\u6570\u636E\u8FDB\u884C\u5173\u8054, \u4FDD\u5B58\u5728\u5012\u6392\u8868\u4E2D, \u7136\u540E\u5C06\u67E5\u8BE2\u5185\u5BB9\u8FDB\u884C\u5206\u8BCD\u540E\u5728\u5012\u6392\u8868\u4E2D\u67E5\u8BE2, \u6700\u540E\u5339\u914D\u6570\u636E</p>`,36),i=[l];function t(h,p,c,d,o,u){return s(),e("div",null,i)}const A=a(r,[["render",t]]);export{f as __pageData,A as default};
